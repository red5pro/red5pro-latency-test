<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset=utf-8>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Michael Lee">
        <title>Latency Test | Red5 Pro</title>
        <link href="normalize.min.css" rel="stylesheet" type="text/css">
        <style>
            .green {
                color: green;
            }
            .red {
                color: red;
            }
            .yellow {
                color: yellow;
            }
        </style>
    </head>
    <body>
        <div id="serverDate">Server:
            <span id="server">
                <em class="red">This clock requires JavaScript.</em>
            </span>
        </div>
        <div id="offsetInfo">Offset:
            <span id="offset"></span>
        </div>
        <div id="precisionInfo">Precision:
            <span id="precision"></span>
        </div>
        <script src="clockfunctions.js"></script>
        <script>
            window.ServerDate = {
                debug: true,
                // Max synchronizing iterations. 10 it's a good number of iterations.
                iterations: 10,
                // After a synchronization there may be a significant difference between our
                // clock and the server's clock.  Rather than make the change abruptly, we
                // change our clock by adjusting it once per second by the amortizationRate.
                amortizationRate: 25, // ms
                // The exception to the above is if the difference between the clock and
                // server's clock is too great (threshold set below).  If that's the case then
                // we skip amortization and set the clock to match the server's clock
                // immediately.
                amortizationThreshold: 10000, // ms
                // After the initial synchronization the two clocks may drift so we
                // automatically synchronize again every synchronizationIntervalDelay.
                synchronizationIntervalDelay: 60000 // ms
            };
        </script>
        <script src="serverdate.js"></script>
        <script>
            setInterval(clockDisplay, 25) // 40/s
        </script>
    </body>
</html>